Table users {
  id          int      [pk, increment]
  email       varchar  [unique, not null]
  password_hash varchar [not null]
  name        varchar
  created_at  datetime [default: `now()`]
}

Table businesses {
  id            int      [pk, increment]
  user_id       int      [ref: > users.id]
  name          varchar
  business_type varchar
  created_at    datetime [default: `now()`]
}

Table clients {
  id              int      [pk, increment]
  business_id     int      [ref: > businesses.id]
  id_number       varchar
  first_name      varchar
  last_name       varchar
  phone           varchar
  email           varchar
  birth_date      date
  source          varchar
  client_type     varchar
  notes           text
  address         varchar
  pipeline_status varchar
  created_at      datetime [default: `now()`]
}

Table tags {
  id           int      [pk, increment]
  business_id  int      [ref: > businesses.id]
  name         varchar
}

Table client_tags {
  client_id  int  [ref: > clients.id]
  tag_id     int  [ref: > tags.id]
  indexes {
    (client_id, tag_id) [pk]
  }
}

Table messages {
  id            int      [pk, increment]
  client_id     int      [ref: > clients.id]
  business_id   int      [ref: > businesses.id]
  type          varchar
  content       text
  scheduled_at  datetime
  sent_at       datetime
  status        varchar
  channel       varchar
}
