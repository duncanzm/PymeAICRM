# Historias de Usuario - PymeAI

Este documento mantiene el seguimiento de todas las historias de usuario y requisitos técnicos para el desarrollo del MVP de PymeAI. Se actualiza regularmente para reflejar el estado actual de implementación de cada funcionalidad.

## Tabla de Contenidos
- [Estado del Proyecto](#estado-del-proyecto)
- [Historias de Usuario](#historias-de-usuario)
- [Criterios de Aceptación](#criterios-de-aceptación)
- [Requisitos Técnicos](#requisitos-técnicos)

## Estado del Proyecto

Estado actual: **En desarrollo (Fase MVP)**

- Sprint 1-2: Configuración y Autenticación ⏳ En progreso
- Sprint 3-4: Gestión de Clientes 🔜 Planificado
- Sprint 5-6: Pipelines 🔜 Planificado
- Sprint 7-8: Chatbot Kula y Finalización 🔜 Planificado

## Historias de Usuario

A continuación se presenta el seguimiento de las historias de usuario organizadas por módulo. Cada historia incluye su estado actual.

### Módulo: Autenticación

| ID | Historia de Usuario | Estado | Sprint | Asignado a |
|----|---------------------|--------|--------|------------|
| 1 | Como propietario de una PYME, quiero registrarme en la plataforma para comenzar a gestionar mi negocio. | 🔄 En progreso | 1 | - |
| 2 | Como usuario registrado, quiero iniciar sesión de forma segura para acceder a mis datos. | 📋 Por hacer | 1 | - |
| 3 | Como administrador de cuenta, quiero invitar a miembros de mi equipo con diferentes niveles de acceso para distribuir tareas. | 📋 Por hacer | 2 | - |
| 4 | Como usuario, quiero recuperar mi contraseña en caso de olvidarla para no perder acceso a mi cuenta. | 📋 Por hacer | 1 | - |
| 5 | Como usuario, quiero cerrar sesión desde cualquier dispositivo para mantener la seguridad de mi cuenta. | 📋 Por hacer | 2 | - |

### Módulo: CRM

| ID | Historia de Usuario | Estado | Sprint | Asignado a |
|----|---------------------|--------|--------|------------|
| 6 | Como gerente de ventas, quiero registrar nuevos clientes con campos personalizados según mi tipo de negocio para mantener información relevante. | 📋 Por hacer | 3 | - |
| 7 | Como vendedor, quiero ver un listado de todos mis clientes con filtros avanzados para encontrar información rápidamente. | 📋 Por hacer | 3 | - |
| 8 | Como gerente de marketing, quiero segmentar automáticamente a mis clientes según su comportamiento de compra para crear estrategias dirigidas. | 📋 Por hacer | 4 | - |
| 9 | Como dueño del negocio, quiero identificar a mis clientes frecuentes, nuevos e inactivos para desarrollar estrategias de retención. | 📋 Por hacer | 3 | - |
| 10 | Como vendedor, quiero registrar cada interacción con mis clientes para mantener un historial completo. | 📋 Por hacer | 3 | - |
| 11 | Como gerente de ventas, quiero recibir alertas sobre clientes inactivos para implementar acciones de recuperación. | 📋 Por hacer | 4 | - |

### Módulo: Pipelines

| ID | Historia de Usuario | Estado | Sprint | Asignado a |
|----|---------------------|--------|--------|------------|
| 12 | Como gerente de ventas, quiero crear pipelines personalizados para adaptar el proceso a mi modelo de negocio. | 📋 Por hacer | 5 | - |
| 13 | Como vendedor, quiero gestionar oportunidades de venta en formato Kanban para visualizar fácilmente el estado de cada negociación. | 📋 Por hacer | 5 | - |
| 14 | Como gerente, quiero establecer etapas personalizadas en mis pipelines para reflejar mi proceso de ventas. | 📋 Por hacer | 5 | - |
| 15 | Como vendedor, quiero mover oportunidades entre etapas mediante arrastrar y soltar para actualizar su estado fácilmente. | 📋 Por hacer | 6 | - |
| 16 | Como gerente de ventas, quiero ver métricas sobre la eficiencia de mi pipeline para identificar cuellos de botella. | 📋 Por hacer | 6 | - |

### Módulo: Análisis de Ventas

| ID | Historia de Usuario | Estado | Sprint | Asignado a |
|----|---------------------|--------|--------|------------|
| 17 | Como dueño del negocio, quiero cargar datos de ventas manualmente para comenzar a analizarlos. | 📋 Por hacer | 4 | - |
| 18 | Como gerente comercial, quiero visualizar los productos más y menos vendidos para tomar decisiones de inventario. | 📋 Por hacer | 4 | - |
| 19 | Como dueño del negocio, quiero ver tendencias de ventas por día y hora para optimizar horarios de operación. | 📋 Por hacer | Post-MVP | - |
| 20 | Como gerente financiero, quiero analizar el margen de rentabilidad por producto para enfocarme en los más rentables. | 📋 Por hacer | Post-MVP | - |
| 21 | Como gerente de marketing, quiero identificar patrones de compra para crear promociones efectivas. | 📋 Por hacer | Post-MVP | - |

### Módulo: Dashboard

| ID | Historia de Usuario | Estado | Sprint | Asignado a |
|----|---------------------|--------|--------|------------|
| 22 | Como dueño del negocio, quiero un panel de control con métricas clave para tomar decisiones informadas rápidamente. | 📋 Por hacer | 7 | - |
| 23 | Como gerente, quiero visualizar KPIs relevantes para mi tipo de negocio para evaluar el desempeño. | 📋 Por hacer | 7 | - |
| 24 | Como dueño, quiero ver informes visuales de recurrencia de clientes para medir la fidelidad. | 📋 Por hacer | Post-MVP | - |
| 25 | Como gerente financiero, quiero exportar reportes en diferentes formatos para compartirlos con otros stakeholders. | 📋 Por hacer | Post-MVP | - |
| 26 | Como gerente de ventas, quiero programar informes periódicos automáticos para mantenerme informado. | 📋 Por hacer | Post-MVP | - |

### Módulo: Chatbot Kula

| ID | Historia de Usuario | Estado | Sprint | Asignado a |
|----|---------------------|--------|--------|------------|
| 27 | Como usuario, quiero hacer preguntas en lenguaje natural al chatbot Kula para obtener asistencia. | 📋 Por hacer | 8 | - |
| 28 | Como dueño del negocio, quiero consultar datos de mi negocio a través del chatbot para acceder rápidamente a información clave. | 📋 Por hacer | 8 | - |
| 29 | Como usuario nuevo, quiero que Kula me guíe en el uso del sistema para aprovechar todas las funcionalidades. | 📋 Por hacer | 8 | - |
| 30 | Como gerente, quiero que Kula me proporcione análisis de datos básicos para entender mejor mi negocio. | 📋 Por hacer | Post-MVP | - |

## Criterios de Aceptación

A continuación se presentan los criterios de aceptación detallados para cada historia de usuario. Estos criterios definen cuándo una funcionalidad se considera completada.

### Módulo: Autenticación

#### Historia #1: Como propietario de una PYME, quiero registrarme en la plataforma para comenzar a gestionar mi negocio.
- Formulario de registro que incluya: nombre, correo electrónico, contraseña, nombre del negocio, tipo de negocio (selección) y número de teléfono.
- Validación de correo electrónico mediante envío de enlace de confirmación.
- Validación de contraseña segura (mínimo 8 caracteres, al menos una mayúscula, un número y un carácter especial).
- Mensaje de éxito claro tras completar el registro.
- Redirección automática al dashboard después de la verificación.
- Opción para leer y aceptar términos y condiciones.

#### Historia #2: Como usuario registrado, quiero iniciar sesión de forma segura para acceder a mis datos.
- Formulario de inicio de sesión con campos para correo electrónico y contraseña.
- Opción "Recordarme" para mantener la sesión activa.
- Sistema de bloqueo temporal después de 5 intentos fallidos.
- Notificación por correo electrónico de inicios de sesión desde dispositivos nuevos.
- Redirección al último punto de trabajo o al dashboard principal tras el inicio de sesión exitoso.

#### Historia #3: Como administrador de cuenta, quiero invitar a miembros de mi equipo con diferentes niveles de acceso para distribuir tareas.
- Sección de "Gestión de Usuarios" en el panel de administración.
- Formulario para enviar invitaciones por correo electrónico.
- Capacidad para asignar roles predefinidos (Admin, Vendedor, Analista, Solo lectura).
- Opción para personalizar permisos específicos por módulo.
- Los invitados reciben un correo con instrucciones para crear su cuenta vinculada.
- Panel para gestionar usuarios existentes (modificar permisos, desactivar).

#### Historia #4: Como usuario, quiero recuperar mi contraseña en caso de olvidarla para no perder acceso a mi cuenta.
- Enlace "Olvidé mi contraseña" en la pantalla de inicio de sesión.
- Formulario para ingresar el correo electrónico asociado a la cuenta.
- Envío de correo con enlace seguro de restablecimiento (válido por 24 horas).
- Página para crear nueva contraseña con confirmación.
- Notificación de cambio de contraseña exitoso.
- Invalidación de sesiones activas en otros dispositivos tras el cambio.

#### Historia #5: Como usuario, quiero cerrar sesión desde cualquier dispositivo para mantener la seguridad de mi cuenta.
- Botón de cierre de sesión visible y accesible en todas las páginas.
- Cierre de sesión efectivo con eliminación de tokens.
- Sección "Dispositivos conectados" que muestre todas las sesiones activas.
- Opción para cerrar sesiones individuales o todas a la vez.
- Información sobre cada sesión (dispositivo, ubicación, fecha de último acceso).

### Módulo: CRM

#### Historia #6: Como gerente de ventas, quiero registrar nuevos clientes con campos personalizados según mi tipo de negocio para mantener información relevante.
- Formulario de registro de cliente con campos básicos (nombre, correo, teléfono, dirección).
- Sección de administración para crear campos personalizados (texto, número, fecha, selección).
- Capacidad para marcar campos como obligatorios u opcionales.
- Opción para organizar campos en secciones lógicas.
- Validación de datos en tiempo real.
- Función para duplicar clientes existentes como base para nuevos registros.

#### Historia #7: Como vendedor, quiero ver un listado de todos mis clientes con filtros avanzados para encontrar información rápidamente.
- Lista de clientes con paginación y ordenamiento por columnas.
- Barra de búsqueda global que filtre resultados en tiempo real.
- Filtros avanzados por múltiples criterios (tipo de cliente, región, valor, última compra).
- Opción para guardar filtros personalizados para uso frecuente.
- Vista en tarjetas y vista en tabla, con opción de cambiar entre ellas.
- Exportación de resultados filtrados a Excel/CSV.

#### Historia #8: Como gerente de marketing, quiero segmentar automáticamente a mis clientes según su comportamiento de compra para crear estrategias dirigidas.
- Segmentación automática en categorías predefinidas (VIP, recurrentes, ocasionales, inactivos).
- Dashboard que muestre la distribución de clientes por segmento.
- Criterios de segmentación configurables (frecuencia de compra, valor, recencia).
- Actualización automática de segmentos basada en nuevas transacciones.
- Capacidad para crear segmentos personalizados con reglas específicas.
- Exportación de listas por segmento para campañas de marketing.

#### Historia #9: Como dueño del negocio, quiero identificar a mis clientes frecuentes, nuevos e inactivos para desarrollar estrategias de retención.
- Panel visual tipo semáforo que muestre la distribución de clientes por estado.
- Lista de clientes nuevos (últimos 30 días) con fuente de adquisición.
- Lista de clientes inactivos (sin compras en los últimos 90 días) con fecha de última transacción.
- Lista de clientes frecuentes con valor promedio de compra y frecuencia.
- Tendencias de activación/desactivación de clientes a lo largo del tiempo.
- Alertas configurables para clientes que cambian de estado.

#### Historia #10: Como vendedor, quiero registrar cada interacción con mis clientes para mantener un historial completo.
- Interfaz para añadir interacciones desde el perfil del cliente.
- Categorización de interacciones (llamada, correo, reunión, venta, etc.).
- Campos para fecha, duración, resumen y resultados.
- Opción para programar seguimiento con recordatorios.
- Línea de tiempo visual de todas las interacciones por cliente.
- Integración con correo electrónico para registrar comunicaciones automáticamente.

#### Historia #11: Como gerente de ventas, quiero recibir alertas sobre clientes inactivos para implementar acciones de recuperación.
- Sistema de alertas configurables por tiempo de inactividad (30, 60, 90 días).
- Notificaciones en plataforma y por correo electrónico.
- Panel de "Clientes en riesgo" con opciones de filtrado.
- Sugerencias automáticas de acciones de recuperación según el perfil del cliente.
- Capacidad para asignar tareas de seguimiento a vendedores.
- Métricas de efectividad de recuperación de clientes.

### Módulo: Pipelines

#### Historia #12: Como gerente de ventas, quiero crear pipelines personalizados para adaptar el proceso a mi modelo de negocio.
- Interfaz de arrastrar y soltar para crear y organizar etapas del pipeline.
- Capacidad para crear múltiples pipelines para diferentes productos o servicios.
- Configuración de campos obligatorios por etapa.
- Definición de probabilidades de cierre por etapa.
- Opción para establecer tiempos esperados en cada etapa.
- Posibilidad de clonar y modificar pipelines existentes.

#### Historia #13: Como vendedor, quiero gestionar oportunidades de venta en formato Kanban para visualizar fácilmente el estado de cada negociación.
- Vista Kanban con columnas que representen las etapas del pipeline.
- Tarjetas de oportunidades con información clave visible (cliente, valor, fecha).
- Funcionalidad de arrastrar y soltar para mover oportunidades entre etapas.
- Filtros por vendedor, rango de fechas, valor y probabilidad.
- Indicadores visuales para oportunidades estancadas o prioritarias.
- Vista resumida y detallada de cada oportunidad al hacer clic.

#### Historia #14: Como gerente, quiero establecer etapas personalizadas en mis pipelines para reflejar mi proceso de ventas.
- Interfaz para crear, editar y ordenar etapas dentro de un pipeline.
- Configuración de campos obligatorios por etapa.
- Definición de actividades sugeridas para cada etapa.
- Asignación de colores a cada etapa para identificación visual.
- Opción para establecer reglas de transición entre etapas.
- Capacidad para desactivar etapas sin eliminarlas (para mantener datos históricos).

#### Historia #15: Como vendedor, quiero mover oportunidades entre etapas mediante arrastrar y soltar para actualizar su estado fácilmente.
- Funcionalidad de arrastrar y soltar en la vista Kanban.
- Validación de campos requeridos al cambiar de etapa.
- Opción para añadir notas al mover una oportunidad.
- Actualización automática de probabilidad de cierre según la etapa.
- Notificaciones a gerentes sobre movimientos de oportunidades importantes.
- Registro del historial de cambios de etapa con fechas y responsables.

#### Historia #16: Como gerente de ventas, quiero ver métricas sobre la eficiencia de mi pipeline para identificar cuellos de botella.
- Dashboard con indicadores clave de rendimiento del pipeline.
- Gráfico de velocidad por etapa (tiempo promedio de permanencia).
- Tasa de conversión entre etapas consecutivas.
- Identificación visual de etapas con mayor abandono.
- Comparativa de rendimiento entre diferentes períodos.
- Análisis por vendedor, producto o segmento de cliente.

### Módulo: Análisis de Ventas

#### Historia #17: Como dueño del negocio, quiero cargar datos de ventas manualmente para comenzar a analizarlos.
- Formulario para carga de archivos CSV/Excel con datos de ventas.
- Plantillas descargables con formato requerido.
- Interfaz de mapeo de columnas para adaptar datos existentes.
- Vista previa de datos antes de la importación final.
- Validación de datos para identificar errores o duplicados.
- Reporte de resultados de importación (éxitos, errores, advertencias).

#### Historia #18: Como gerente comercial, quiero visualizar los productos más y menos vendidos para tomar decisiones de inventario.
- Ranking visual de productos por volumen de ventas y por ingresos.
- Gráficos comparativos con filtros por período.
- Identificación del 20% superior e inferior del catálogo.
- Tendencias de venta por producto a lo largo del tiempo.
- Análisis de estacionalidad por producto o categoría.
- Exportación de reportes en múltiples formatos.

#### Historia #19: Como dueño del negocio, quiero ver tendencias de ventas por día y hora para optimizar horarios de operación.
- Mapa de calor que muestre ventas por día de la semana y hora.
- Gráfico de línea de ventas diarias con comparativa semanal/mensual.
- Análisis de picos y valles de actividad comercial.
- Capacidad para filtrar por tipo de producto o servicio.
- Recomendaciones automáticas para optimización de horarios.
- Comparativa con períodos anteriores para identificar cambios en patrones.

#### Historia #20: Como gerente financiero, quiero analizar el margen de rentabilidad por producto para enfocarme en los más rentables.
- Cálculo automático de márgenes basado en costo y precio de venta.
- Clasificación de productos por rentabilidad porcentual y absoluta.
- Gráfico de dispersión que relacione volumen de ventas con margen.
- Tendencias de rentabilidad a lo largo del tiempo.
- Alertas para productos con margen negativo o por debajo del umbral.
- Simulador de impacto en rentabilidad al ajustar precios o costos.

#### Historia #21: Como gerente de marketing, quiero identificar patrones de compra para crear promociones efectivas.
- Análisis de canasta de compra que muestre productos frecuentemente adquiridos juntos.
- Identificación de secuencias comunes de compra a lo largo del tiempo.
- Segmentación de patrones por tipo de cliente.
- Visualización de estacionalidad en preferencias de productos.
- Recomendaciones automáticas de bundles o promociones cruzadas.
- Exportación de segmentos para campañas de marketing dirigidas.

### Módulo: Dashboard

#### Historia #22: Como dueño del negocio, quiero un panel de control con métricas clave para tomar decisiones informadas rápidamente.
- Dashboard principal con widgets configurables.
- Visualización de KPIs esenciales (ventas, clientes nuevos, rentabilidad).
- Comparativa con períodos anteriores y objetivos establecidos.
- Alertas visuales para métricas fuera de rango esperado.
- Capacidad para profundizar en cada métrica para análisis detallado.
- Guardado de configuraciones personalizadas por usuario.

#### Historia #23: Como gerente, quiero visualizar KPIs relevantes para mi tipo de negocio para evaluar el desempeño.
- Biblioteca de KPIs predefinidos por industria.
- Capacidad para crear indicadores personalizados.
- Establecimiento de metas y umbrales de alerta por indicador.
- Visualización de tendencias históricas con proyecciones.
- Dashboard específico por área (ventas, marketing, finanzas).
- Exportación de reportes de KPIs para presentaciones.

#### Historia #24: Como dueño, quiero ver informes visuales de recurrencia de clientes para medir la fidelidad.
- Cálculo de tasa de retención por períodos.
- Gráfico de cohortes que muestre retención a lo largo del tiempo.
- Análisis de frecuencia de compra por segmento.
- Identificación de factores que influyen en la recurrencia.
- Tendencias de valor del cliente a lo largo del tiempo.
- Alertas sobre cambios significativos en patrones de recurrencia.

#### Historia #25: Como gerente financiero, quiero exportar reportes en diferentes formatos para compartirlos con otros stakeholders.
- Exportación en múltiples formatos (PDF, Excel, CSV, PowerPoint).
- Plantillas preconfiguradas para diferentes tipos de reportes.
- Opción para incluir o excluir secciones específicas.
- Personalización de encabezados, logos y estilos.
- Programación de envío automático de reportes periódicos.
- Generación de enlaces compartibles con diferentes niveles de acceso.

#### Historia #26: Como gerente de ventas, quiero programar informes periódicos automáticos para mantenerme informado.
- Interfaz para configurar reportes automáticos.
- Opciones de periodicidad (diaria, semanal, mensual, personalizada).
- Selección de contenido y formato del reporte.
- Lista de destinatarios con diferentes niveles de detalle.
- Vista previa del reporte antes de programar.
- Historial de reportes enviados con estadísticas de apertura.

### Módulo: Chatbot Kula

#### Historia #27: Como usuario, quiero hacer preguntas en lenguaje natural al chatbot Kula para obtener asistencia.
- Interfaz de chat accesible desde cualquier pantalla de la aplicación.
- Capacidad para entender preguntas en lenguaje natural en español.
- Respuestas contextualizadas según el perfil y datos del usuario.
- Opciones sugeridas para continuar la conversación.
- Historial de conversaciones consultable.
- Capacidad para detectar frustración y escalar a soporte humano cuando sea necesario.

#### Historia #28: Como dueño del negocio, quiero consultar datos de mi negocio a través del chatbot para acceder rápidamente a información clave.
- Reconocimiento de consultas sobre KPIs y métricas ("¿Cuánto vendimos ayer?").
- Generación de gráficos y visualizaciones directamente en el chat.
- Comparativas automáticas con períodos anteriores.
- Capacidad para profundizar en la información solicitando más detalles.
- Alertas sobre métricas importantes al iniciar conversación.
- Exportación de datos consultados a formatos estándar.

#### Historia #29: Como usuario nuevo, quiero que Kula me guíe en el uso del sistema para aprovechar todas las funcionalidades.
- Detección automática de usuarios nuevos o que exploran funciones por primera vez.
- Tutoriales paso a paso sobre funcionalidades principales.
- Sugerencias contextuales basadas en la pantalla actual.
- Videos explicativos integrados en las respuestas.
- Capacidad para detectar dificultades y ofrecer ayuda específica.
- Seguimiento del progreso de aprendizaje del usuario.

#### Historia #30: Como gerente, quiero que Kula me proporcione análisis de datos básicos para entender mejor mi negocio.
- Generación de análisis básicos a partir de consultas conversacionales.
- Identificación automática de tendencias y patrones relevantes.
- Detección y alerta de anomalías en los datos.
- Presentación de insights con visualizaciones simples.
- Sugerencias de acciones basadas en los hallazgos.
- Capacidad para profundizar en cualquier insight presentado.

## Requisitos Técnicos

### Arquitectura y Configuración
- [ ] Crear estructura del proyecto
- [ ] Configurar entorno Docker
- [ ] Implementar sistema de migraciones
- [ ] Configurar CI/CD

### Seguridad y Autenticación
- [ ] Implementar autenticación JWT
- [ ] Configurar almacenamiento seguro de contraseñas
- [ ] Implementar sistema de roles y permisos
- [ ] Configurar HTTPS

### Backend (FastAPI)
- [ ] Desarrollar API RESTful con documentación
- [ ] Implementar validación de datos con Pydantic
- [ ] Crear endpoints para CRM
- [ ] Desarrollar servicios de análisis de datos

### Frontend (React.js)
- [ ] Implementar diseño responsive
- [ ] Desarrollar componentes reutilizables
- [ ] Crear interfaz de usuario intuitiva
- [ ] Implementar vista Kanban para pipelines

### Base de Datos
- [ ] Diseñar esquema relacional
- [ ] Implementar modelo para campos personalizables
- [ ] Crear índices optimizados
- [ ] Configurar respaldos automáticos

### Integración con IA
- [ ] Integrar OpenAI API para el chatbot Kula
- [ ] Implementar modelos de segmentación de clientes
- [ ] Desarrollar algoritmos para identificación de patrones
- [ ] Crear sistema de recomendaciones
